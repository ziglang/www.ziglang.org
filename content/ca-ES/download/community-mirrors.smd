---
.title = "Webs Mirall de la Comunitat",
.author = "",
.date = @date("2024-08-07:00:00:00"),
.layout = "download/community-mirrors.shtml",
.alternatives = [{
    .name = "list",
    .layout = "download/community-mirrors-list.shtml",
    .output = "/download/community-mirrors.txt",
}],
.custom = { "mobile_menu_title": "Webs Mirall" },
---

Si esteu configurant alguna cosa que descarregarà Zig automàticament, com ara la integració contínua (CI), potser us interessa utilitzar webs mirall de la comunitat en lloc de descarregar-lo de ziglang.org.

El lloc web ziglang.org no ofereix cap garantia de temps d'activitat o velocitat, la qual cosa significa que la vostra CI pot fallar esporàdicament o tenir execucions més lentes si l'utilitzeru com a URL de descàrrega. De fet, configurar la vostra CI per descarregar directament de ziglang.org contribueix a problemes de temps d'activitat i velocitat, perquè aquest lloc està [intencionadament allotjat en una configuració senzilla d'un sol ordinador](https://ziglang.org/news/migrate-to-self-hosting). En canvi, és sovint una bona idea obtenir Zig d'un dels diversos webs mirall mantinguts per la comunitat. Aquests webs mirall no estan oficialment avalats per la Zig Software Foundation, però es poden utilitzar sense riscos de seguretat gràcies a la nostra signatura dels arxius. Tot i que cap web mirall individual té una garantia de temps d'activitat o velocitat, configurar la vostra automatització per recórrer la llista de webs mirall disponibles pot garantir de manera efectiva un alt temps d'activitat a la pràctica.

> # [Avís de seguretat]($block)
> Els webs mirall de la comunitat no són oficialment de confiança ni estan avalats per la Zig Software Foundation, i en teoria podrien oferir binaris maliciosos. Si els utilitzeu, **heu** d'assegurar-vos de validar la signatura minisign de cada tarball que descarregueu amb la clau pública de la ZSF, disponible a [la pàgina de descàrrega](/download).

## Accions de GitHub

Si esteu configurant una automatització utilitzant GitHub Actions, potser us interessa l'acció [mlugg/setup-zig](https://github.com/marketplace/actions/setup-zig-compiler) (teniu en compte que aquest no és un projecte oficial de la ZSF). No només instal·la una versió de Zig de la vostra elecció des d'un web mirall de la comunitat, sinó que també guarda el directori de la vostra memòria cau de Zig entre les execucions del flux de treball, permetent compilacions més ràpides.

## Utilitzant Webs Mirall

La llista dels webs mirall de la comunitat està disponible en un fitxer de text ASCII separat per salts de línia a https://ziglang.org/download/community-mirrors.txt. Es recomana que les eines obtinguin aquesta llista i proveu els webs mirall en un ordre aleatori (per evitar carregar excessivament un sol web mirall, ja que això el faria més lent per a tothom).

Cada tarball de Zig s'associa amb un fitxer de signatura [minisign](https://jedisct1.github.io/minisign/), que també es pot descarregar dels webs mirall. **Quan descarregueu un tarball d'un web mirall, també heu de descarregar la seva signatura associada i verificar el tarball amb ella.** Si no es verifica la signatura, teòricament podríeu quedar vulnerables a webs mirall maliciosos que allotgin tarballs modificats.

En poques paraules, l'estratègia recomanada és aproximadament aquest pseudocodi:

```python
pubkey = "(copia això de https://ziglang.org/download)"
tarball_name = "zig-x86_64-linux-0.14.1.tar.xz"
# Per millorar el temps d'activitat, opcionalment, desa aquesta petició GET:
mirrors = http_get("https://ziglang.org/download/community-mirrors.txt")
# Codificat en ASCII, un mirall per línia, els salts de línia són LF, hi ha un salt de línia al final.
shuffled = shuffle_lines(mirrors)
for mirror_url in shuffled:
    tarball = http_get(f"{mirror_url}/{tarball_name}?source=my_automation_name")
    if success:
        # MAI OMETIS AQUEST PAS. La signatura s'ha de verificar abans que el tarball es consideri segur.
        signature = http_get(f"{mirror_url}/{tarball_name}.minisig?source=my_automation_name")
        if success and minisign_verify(tarball, signature, pubkey):
            print("Zig 0.14.1 descarregat amb èxit!")
```

Com que ziglang.org no té un temps d'activitat garantit, el fitxer `community-mirrors.txt` pot, de vegades, ser inaccessible. Per aquesta raó, potser voldreu considerar la possibilitat de guardar-ne el contingut a la memòria cau per evitar interrupcions en cas que ziglang.org experimenti temps d'inactivitat. L'interval de recuperació recomanat és aproximadament una vegada al dia. En aquest moment, els webs mirall es poden afegir o eliminar mensualment a mesura que l'ecosistema evoluciona, per la qual cosa la recuperació periòdica és essencial.

Escrit de manera més precisa, aquí hi ha la informació clau i el flux de treball recomanat per descarregar tarballs de Zig:

* El fitxer de la llista dels webs mirall està disponible a https://ziglang.org/download/community-mirrors.txt.
  * Com que ziglang.org no garanteix el temps d'activitat, pot ser desitjable emmagatzemar aquest fitxer a la memòria cau.
* El fitxer de la llista dels webs mirall conté URL dels webs mirall codificats en ASCII, separats per caràcters de nova línia (ASCII LF 0x20). Hi ha una nova línia al final. No hi ha altres espais en blanc. No hi ha línies en blanc.
* Els webs mirall han de suportar HTTPS. Cada línia del fitxer de la llista dels webs mirall comença amb "https://".
* Els webs mirall no poden garantir el temps d'activitat, així que si un no us pot proporcionar un tarball, hauríeu de provar-ne un altre. Idealment, barregeu la llista i proveu cada web mirall al seu torn.
  * Normalment, el primer funcionarà. Si cap web mirall funciona, podeu optar per provar `ziglang.org` com a darrera opció.
* Per descarregar un tarball d'un web mirall, realitzeu una petició GET a "mirall/nom_fitxer", on "mirall" és l'URL de la web mirall, i "nom_fitxer" és el nom base del tarball corresponent a ziglang.org (per exemple, `zig-x86_64-linux-0.14.1.tar.xz`).
  * Us recomanem encaridament que inclogueu a la vostra petició un paràmetre de consulta anomenat `source` que contingui una cadena que indiqui què està fent aquesta petició. Per exemple, l'acció de GitHub `mlugg/setup-zig` el passa com a `?source=github-mlugg-setup-zig`.
  * Els tarballs de codi font, els tarballs d'arrencada i els tarballs binaris estan disponibles en tots els webs mirall llistats, així com les signatures minisign per a tots aquests fitxers.
  * Els tarballs binaris per a versions recents de Zig tenen el format `zig-x86_64-linux-0.14.1.tar.xz`.
  * Si un web mirall respon amb un codi d'estat HTTP diferent de 200 OK:
    * `503 Unavailable` pot indicar un temps d'inactivitat programat.
    * `429 Too Many Requests` pot indicar una limitació de taxa intencional.
    * `404 Not Found` és una resposta permesa en sol·licitar versions de Zig 0.5.0 o anteriors, o versions de desenvolupament de Zig anteriors a la darrera versió actual.
    * `504 Gateway Timeout` indica que el tarball no està disponible perquè `https://ziglang.org/` és actualment inaccessible (i el tarball no està a la memòria cau del web mirall).
    * En cas contrari, no dubteu a [obrir una incidència](https://github.com/ziglang/www.ziglang.org/issues/new) per informar-nos del problema.
* La Zig Software Foundation mai pot garantir la seguretat de cap web mirall, així que cada vegada que es descarrega un tarball, és **essencial** descarregar també la signatura minisign (afegeix el sufix ".minisig" al nom del fitxer) i verificar-la amb la clau pública de la ZSF (que hauríeu de copiar de la pàgina ziglang.org/download). **Mai ometeu aquest pas.**
  * Si un web mirall respon amb `200 OK` però la validació de la signatura falla amb el tarball retornat, no dubtis a [obrir una incidència](https://github.com/ziglang/www.ziglang.org/issues/new) per informar-nos del problema.
* Quan es verifica la signatura minisig, també és necessari validar el seu **comentari de confiança** (cosa que la implementació de referència `minisign` sempre fa), i assegurar-se que el seu camp "file" coincideix amb el nom del tarball sol·licitat, per prevenir atacs de downgrade.

## Allotjament d'un Web Mirall

Si us interessa allotjar un web mirall, consulteu la [documentació del repositori www.ziglang.org](https://github.com/ziglang/www.ziglang.org/blob/main/MIRRORS.md). Gràcies per ajudar a millorar i descentralitzar l'ecosistema Zig!
