{{ $place := .Get 0 }}
{{ range $.Site.Data.communities }}
    {{ if isset .places $place }}
        <div class="community community-{{ $place }}" id="{{ (delimit (slice .name $place) "-") | urlize }}">
            
            <div class="community-header">
                {{ if eq $place "irc" }}
                    <!-- https://materialdesignicons.com/icon/pound-box -->
                    <svg style="width:24px;height:24px" viewBox="2 2 20 20">
                        <title>IRC</title>
                        <path fill="currentColor" d="M3,5A2,2 0 0,1 5,3H19A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5M7,18H9L9.35,16H13.35L13,18H15L15.35,16H17.35L17.71,14H15.71L16.41,10H18.41L18.76,8H16.76L17.12,6H15.12L14.76,8H10.76L11.12,6H9.12L8.76,8H6.76L6.41,10H8.41L7.71,14H5.71L5.35,16H7.35L7,18M10.41,10H14.41L13.71,14H9.71L10.41,10Z" />
                    </svg>
                {{ end }}
                {{ if eq $place "discord" }}
                    <!-- https://simpleicons.org/?q=discord -->
                    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Discord</title><path fill="currentColor" d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/></svg>
                {{ end }}
                {{ if eq $place "telegram" }}
                    <!-- https://simpleicons.org/?q=telegram -->
                    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Telegram</title><path fill="currentColor" d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/></svg>
                {{ end }}
                {{ if eq $place "matrix" }}
                    <!-- https://simpleicons.org/?q=matrix -->
                    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Matrix</title><path fill="currentColor" d="M.632.55v22.9H2.28V24H0V0h2.28v.55zm7.043 7.26v1.157h.033c.309-.443.683-.784 1.117-1.024.433-.245.936-.365 1.5-.365.54 0 1.033.107 1.481.314.448.208.785.582 1.02 1.108.254-.374.6-.706 1.034-.992.434-.287.95-.43 1.546-.43.453 0 .872.056 1.26.167.388.11.716.286.993.53.276.245.489.559.646.951.152.392.23.863.23 1.417v5.728h-2.349V11.52c0-.286-.01-.559-.032-.812a1.755 1.755 0 0 0-.18-.66 1.106 1.106 0 0 0-.438-.448c-.194-.11-.457-.166-.785-.166-.332 0-.6.064-.803.189a1.38 1.38 0 0 0-.48.499 1.946 1.946 0 0 0-.231.696 5.56 5.56 0 0 0-.06.785v4.768h-2.35v-4.8c0-.254-.004-.503-.018-.752a2.074 2.074 0 0 0-.143-.688 1.052 1.052 0 0 0-.415-.503c-.194-.125-.476-.19-.854-.19-.111 0-.259.024-.439.074-.18.051-.36.143-.53.282-.171.138-.319.337-.439.595-.12.259-.18.6-.18 1.02v4.966H5.46V7.81zm15.693 15.64V.55H21.72V0H24v24h-2.28v-.55z"/></svg>
                {{ end }}
                {{ if eq $place "email_list" }}
                    <!-- https://materialdesignicons.com/icon/email-newsletter -->
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <title>Mailing list</title>
                        <path fill="currentColor" d="M12 .64L8.23 3H5V5L2.97 6.29C2.39 6.64 2 7.27 2 8V18C2 19.11 2.9 20 4 20H20C21.11 20 22 19.11 22 18V8C22 7.27 21.61 6.64 21.03 6.29L19 5V3H15.77M7 5H17V9.88L12 13L7 9.88M8 6V7.5H16V6M5 7.38V8.63L4 8M19 7.38L20 8L19 8.63M8 8.5V10H16V8.5Z" />
                    </svg>
                {{ end }}
                {{ if eq $place "reddit" }}
                    <!-- https://simpleicons.org/?q=reddit -->
                    <svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Reddit</title><path fill="currentColor" d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"/></svg>
                {{ end }}
                {{ if eq $place "forum" }}
                    <!-- https://materialdesignicons.com/icon/forum -->
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <title>Forum</title>
                        <path fill="currentColor" d="M17,12V3A1,1 0 0,0 16,2H3A1,1 0 0,0 2,3V17L6,13H16A1,1 0 0,0 17,12M21,6H19V15H6V17A1,1 0 0,0 7,18H18L22,22V7A1,1 0 0,0 21,6Z" />
                    </svg>
                {{ end }}
                {{ if eq $place "newsletter" }}
                    <!-- https://materialdesignicons.com/icon/newspaper-variant-outline -->
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <title>Newsletter</title>
                        <path fill="currentColor" d="M20 5L20 19L4 19L4 5H20M20 3H4C2.89 3 2 3.89 2 5V19C2 20.11 2.89 21 4 21H20C21.11 21 22 20.11 22 19V5C22 3.89 21.11 3 20 3M18 15H6V17H18V15M10 7H6V13H10V7M12 9H18V7H12V9M18 11H12V13H18V11Z" />
                    </svg>
                {{ end }}
                {{ if eq $place "merchandise" }}
                    <!-- https://materialdesignicons.com/icon/cart -->
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <title>Merchandise</title>
                        <path fill="currentColor" d="M17,18C15.89,18 15,18.89 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20C19,18.89 18.1,18 17,18M1,2V4H3L6.6,11.59L5.24,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42A0.25,0.25 0 0,1 7.17,14.75C7.17,14.7 7.18,14.66 7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.58 17.3,11.97L20.88,5.5C20.95,5.34 21,5.17 21,5A1,1 0 0,0 20,4H5.21L4.27,2M7,18C5.89,18 5,18.89 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20C9,18.89 8.1,18 7,18Z" />
                    </svg>
                {{ end }}
                {{ if eq $place "multimedia" }}
                    <!-- https://materialdesignicons.com/icon/video-vintage -->
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <title>Multimedia</title>
                        <path fill="currentColor" d="M18,14.5V11A1,1 0 0,0 17,10H16C18.24,8.39 18.76,5.27 17.15,3C15.54,0.78 12.42,0.26 10.17,1.87C9.5,2.35 8.96,3 8.6,3.73C6.25,2.28 3.17,3 1.72,5.37C0.28,7.72 1,10.8 3.36,12.25C3.57,12.37 3.78,12.5 4,12.58V21A1,1 0 0,0 5,22H17A1,1 0 0,0 18,21V17.5L22,21.5V10.5L18,14.5M13,4A2,2 0 0,1 15,6A2,2 0 0,1 13,8A2,2 0 0,1 11,6A2,2 0 0,1 13,4M6,6A2,2 0 0,1 8,8A2,2 0 0,1 6,10A2,2 0 0,1 4,8A2,2 0 0,1 6,6Z" />
                    </svg>
                {{ end }}
                {{ if eq $place "learning" }}
                    <!-- https://materialdesignicons.com/icon/book-open-page-variant -->
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <title>Learning</title>
                        <path fill="currentColor" d="M19 2L14 6.5V17.5L19 13V2M6.5 5C4.55 5 2.45 5.4 1 6.5V21.16C1 21.41 1.25 21.66 1.5 21.66C1.6 21.66 1.65 21.59 1.75 21.59C3.1 20.94 5.05 20.5 6.5 20.5C8.45 20.5 10.55 20.9 12 22C13.35 21.15 15.8 20.5 17.5 20.5C19.15 20.5 20.85 20.81 22.25 21.56C22.35 21.61 22.4 21.59 22.5 21.59C22.75 21.59 23 21.34 23 21.09V6.5C22.4 6.05 21.75 5.75 21 5.5V19C19.9 18.65 18.7 18.5 17.5 18.5C15.8 18.5 13.35 19.15 12 20V6.5C10.55 5.4 8.45 5 6.5 5Z" />
                    </svg>
                {{ end }}
                {{ if eq $place "miscellaneous" }}
                    <!-- https://materialdesignicons.com/icon/dots-horizontal -->
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <title>Miscellaneous</title>
                        <path fill="currentColor" d="M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z" />
                    </svg>
                {{ end }}

                
                

                <div>
                    <h2 title="Join {{.name}}">
                        {{ if eq $place "discord" }}
                            {{ $discord := index .places "discord" }}
                            <a href="{{ $discord.invite }}" class="external-link">{{.name}}</a>
                        {{ else if eq $place "reddit" }}
                            {{ $reddit := index .places "reddit" }}
                            <a href="https://old.reddit.com/{{ $reddit.subreddit }}" class="external-link">{{.name}}</a>
                        {{ else if eq $place "telegram" }}
                            {{ $telegram := index .places "telegram" }}
                            <a href="{{ $telegram.invite }}" class="external-link">{{.name}}</a>
                        {{ else if eq $place "matrix" }}
                            {{ $matrix := index .places "matrix" }}
                            <a href="{{ $matrix.invite }}">{{.name}}</a>
                        {{ else }}
                            {{ $entry := index .places $place }}
                            <a href="{{ $entry.homepage }}" class="external-link">{{.name}}</a>
                        {{ end }}
                    </h2>
                    <span class="language">
                        {{ range $i, $l := .languages }}
                            {{ if $i }} • {{ end }}
                            {{$l}}
                        {{ end }}
                    </span>
                    •
                    <span class="owner">
                        {{ if eq (len .owners) 1 }} Owner: {{ else }} Owners: {{ end }}
                        {{ range $i, $o := .owners }}
                            {{ if $i }}  {{ end }}
                            <a href="{{$o.url}}">{{$o.name}}</a>
                        {{ end }}
                    </span>
                </div>
            </div>


            <div class="community-place-description">
                {{ (index .places $place).description }}
            </div>

            <div class="community-place-extra">
            {{ $hasLinks := ne 0 (len .links) }}
            {{ if $hasLinks }}
                {{ range $i, $l := .links }}
                    {{ if $i }} • {{ end }}
                        <a href="{{ $l.url }}">{{ $l.title }}</a>
                {{ end }}
            {{ end }}
            {{ if eq $place "irc" }}
                {{ $irc := index .places "irc" }}
                {{ range $i, $l := $irc.links }}
                 {{ if $i }} • {{ end }}
                 <a href="{{ $l.url }}">{{ $l.title }}</a>
                {{ end }}
            {{ end }}

            {{ if eq $place "discord" }}
                {{ $discord := index .places "discord" }}
                {{ if gt (len $discord.moderators) 0}}
                <p>
                    {{ if eq (len $discord.moderators) 1}}
                        Moderator:
                    {{ else }}
                        Moderators:
                    {{ end }}
                {{ range $i, $l := $discord.moderators }}
                    {{ if $i }} • {{ end }}
                    <a href="{{ $l.url }}">{{ $l.name }}</a>
                {{ end }}
                </p>
                {{ end }}
            {{ end }}

            {{ if eq $place "telegram" }}
                {{ $telegram := index .places "telegram" }}
                {{ if gt (len $telegram.moderators) 0}}
                <p>
                    {{ if eq (len $telegram.moderators) 1}}
                        Moderator:
                    {{ else }}
                        Moderators:
                    {{ end }}
                {{ range $i, $l := $telegram.moderators }}
                    {{ if $i }} • {{ end }}
                    <a href="{{ $l.url }}">{{ $l.name }}</a>
                {{ end }}
                </p>
                {{ end }}
            {{ end }}

            {{ if eq $place "matrix" }}
                {{ $matrix := index .places "matrix" }}
                {{ if gt (len $matrix.moderators) 0}}
                <p>
                    {{ if eq (len $matrix.moderators) 1}}
                        Moderator:
                    {{ else }}
                        Moderators:
                    {{ end }}
                {{ range $i, $l := $matrix.moderators }}
                    {{ if $i }} • {{ end }}
                    <a href="{{ $l.url }}">{{ $l.name }}</a>
                {{ end }}
                </p>
                {{ end }}
            {{ end }}

            {{ if eq $place "email_list" }}
                {{ $email_list := index .places "email_list" }}
                {{ if gt (len $email_list.moderators) 0}}
                <p>
                    {{ if eq (len $email_list.moderators) 1}}
                        Moderator:
                    {{ else }}
                        Moderators:
                    {{ end }}
                {{ range $i, $l := $email_list.moderators }}
                    {{ if $i }} • {{ end }}
                    <a href="{{ $l.url }}">{{ $l.name }}</a>
                {{ end }}
                </p>
                {{ end }}
                {{ range $i, $l := $email_list.links }}
                 {{ if $i }} • {{ end }}
                 <a href="{{ $l.url }}">{{ $l.title }}</a>
                {{ end }}
            {{ end }}

            {{ if eq $place "reddit" }}
                {{ $reddit := index .places "reddit" }}
                {{ if gt (len $reddit.moderators) 0}}
                <p>
                    {{ if eq (len $reddit.moderators) 1}}
                        Moderator:
                    {{ else }}
                        Moderators:
                    {{ end }}
                    {{ range $i, $l := $reddit.moderators }}
                        {{ if $i }} • {{ end }}
                        <a href="{{ $l.url }}">{{ $l.name }}</a>
                    {{ end }}
                </p>
                {{ end }}
                <a href="https://old.reddit.com/{{ $reddit.subreddit }}/about/rules">Rules</a>
            {{ end }}


            {{ if eq $place "forum" }}
                {{ $forum := index .places "forum" }}
                {{ if gt (len $forum.moderators) 0}}
                <p>
                    {{ if eq (len $forum.moderators) 1}}
                        Moderator:
                    {{ else }}
                        Moderators:
                    {{ end }}
                    {{ range $i, $l := $forum.moderators }}
                        {{ if $i }} • {{ end }}
                        <a href="{{ $l.url }}">{{ $l.name }}</a>
                    {{ end }}
                </p>
                {{ end }}
            {{ end }}


            {{ if eq $place "newsletter" }}
                {{if $hasLinks }} • {{end}}
                {{ $newsletter := index .places "newsletter" }}
                {{ range $i, $l := $newsletter.links }}
                 {{ if $i }} • {{ end }}
                 <a href="{{ $l.url }}">{{ $l.title }}</a>
                {{ end }}
            {{ end }}

            {{ if eq $place "multimedia" }}
                {{if $hasLinks }} • {{end}}
                {{ $multimedia := index .places "multimedia" }}
                {{ range $i, $l := $multimedia.links }}
                 {{ if $i }} • {{ end }}
                 <a href="{{ $l.url }}">{{ $l.title }}</a>
                {{ end }}
            {{ end }}

            
            {{ if eq $place "merchandise" }}
                {{ $merchandise := index .places "merchandise" }}

                {{ if gt $merchandise.supports_zsf 0 }}
                <p class="merchanidise-supports-zsf">
                    <!-- https://materialdesignicons.com/icon/hand-heart -->
                    <svg style="width:24px;height:24px" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M20 17Q20.86 17 21.45 17.6T22.03 19L14 22L7 20V11H8.95L16.22 13.69Q17 14 17 14.81 17 15.28 16.66 15.63T15.8 16H13L11.25 15.33L10.92 16.27L13 17H20M16 3.23Q17.06 2 18.7 2 20.06 2 21 3T22 5.3Q22 6.33 21 7.76T19.03 10.15 16 13Q13.92 11.11 12.94 10.15T10.97 7.76 10 5.3Q10 3.94 10.97 3T13.31 2Q14.91 2 16 3.23M.984 11H5V22H.984V11Z" />
                    </svg>
                    {{$merchandise.supports_zsf}}% of profits support the Zig Software Foundation.
                </p>
                {{ end }}


                {{ range $i, $l := $merchandise.links }}
                 {{ if $i }} • {{ end }}
                 <a href="{{ $l.url }}">{{ $l.title }}</a>
                {{ end }}
            {{ end }}

            {{ if eq $place "learning" }}
                {{ $learning := index .places "learning" }}

                {{ range $i, $l := $learning.links }}
                 {{ if $i }} • {{ end }}
                 <a href="{{ $l.url }}">{{ $l.title }}</a>
                {{ end }}
            {{ end }}

            {{ if eq $place "miscellaneous" }}
                {{ $miscellaneous := index .places "miscellaneous" }}

                {{ range $i, $l := $miscellaneous.links }}
                 {{ if $i }} • {{ end }}
                 <a href="{{ $l.url }}">{{ $l.title }}</a>
                {{ end }}
            {{ end }}
            </div>

            {{ if gt (len .places) 1 }}
            <div class="community-references">
                More from this community:

                {{ $name := .name }}
                {{ range $k, $v := .places }}
                    {{ if ne $k $place }}
                    <a href="#{{ (delimit (slice $name $k) "-") | urlize }}">
                        {{ if eq $k "irc"}} IRC {{ end }}
                        {{ if eq $k "discord"}} Discord {{ end }}
                        {{ if eq $k "mailing_list"}} Mailing List {{ end }}
                        {{ if eq $k "newsletter"}} Newsletter {{ end }}
                        {{ if eq $k "multimedia"}} Multimedia {{ end }}
                    </a>
                    {{ end }}
                {{ end }}
            </div>
            {{ end }}
        </div>
    {{ end }}
{{ end }}

